<ion-view view-title="Lista">
    <ion-content class="has-header">
        <p ng-if="errorMessage">
          Não foi possível encontrar sua localização. Verifique se seu GPS está ligado.
        </p>

        <h1 class="vamosjuntas-home-header">Vamos Juntas!</h1>
        <form ng-submit="searchAddress()">
            <label class="item item-input">
                <i class="icon ion-search placeholder-icon"></i>
                <input type="text" placeholder="Procurar um lugar" ng-model="search.text" googleplace>
            </label>
            <button class="button button-small button-royal vamosjuntas-search-button" type="submit">
              Buscar
            </button>
         </form>
      <ul class="place-list list">
          <li ng-repeat="place in addresses track by $index" class="item item-icon-left" ng-click="confirmAddress(place)">
              <i class="icon ion-ios-location"></i>
                {{place.description}}
          </li>
          <li ng-if= "addresses !== undefined && !addresses.length">
            Nenhum resultado encontrado.
          </li>
      </ul>

      <h4>Localidades de risco próximos a você</h4>
      <div ng-repeat="place in places">
        <div class="list">
          <a class="item item-thumbnail-left" ng-click="getSpecificPlace(place)" ui-sref="placeDetails">
            <img src="http://lorempixel.com/80/80"/>
            <h2>{{ place.address }}</h2>
            <p>{{ getTotalOfOccurrences(place) }}
              denúncias</p>
          </a>
        </div>
      </div>
      <button class="button button-block button-positive" ui-sref="report({address: search.text, latitude: search.latitude, longitude: search.longitude})">
        Reportar risco
      </button>
  </ion-content>
</ion-view>
